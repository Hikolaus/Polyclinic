@model List<ClinicApp.Models.Core.Schedule>
@{
    ViewData["Title"] = "Мое расписание";
}

<div class="container mt-4">
    <h2><i class="fas fa-calendar-alt me-2"></i>Мое расписание</h2>

    <div class="alert alert-info mt-3 shadow-sm">
        <i class="fas fa-info-circle me-2"></i>
        Для изменения графика работы обратитесь к администратору клиники.
    </div>

    @if (Model.Any())
    {
        <div class="card shadow-sm mt-4">
            <div class="card-body p-0">
                <table class="table table-hover mb-0 align-middle">
                    <thead class="table-light">
                        <tr>
                            <th>День недели</th>
                            <th>Время работы</th>
                            <th>Перерыв</th>
                            <th>Длительность приема</th>
                            <th>Статус</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var schedule in Model)
                        {
                            <tr>
                                <td class="fw-bold">@GetDayOfWeek(schedule.DayOfWeek)</td>
                                <td>@schedule.StartTime.ToString(@"hh\:mm") - @schedule.EndTime.ToString(@"hh\:mm")</td>
                                <td>
                                    @if (schedule.BreakStart.HasValue && schedule.BreakEnd.HasValue)
                                    {
                                        @schedule.BreakStart.Value.ToString(@"hh\:mm") <text>-</text> @schedule.BreakEnd.Value.ToString(@"hh\:mm")
                                    }
                                    else
                                    {
                                        <span class="text-muted">Без перерыва</span>
                                    }
                                </td>
                                <td>@schedule.SlotDurationMinutes мин.</td>
                                <td>
                                    @if (schedule.IsActive)
                                    {
                                        <span class="badge bg-success">Активно</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-secondary">Неактивно</span>
                                    }
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    }
    else
    {
        <div class="alert alert-warning mt-4">
            Расписание еще не составлено.
        </div>
    }

    <div class="mt-3">
        <a href="/Doctor/Dashboard" class="btn btn-outline-secondary">Назад</a>
    </div>
</div>

@functions {
    public string GetDayOfWeek(int dayNumber)
    {
        return dayNumber switch
        {
            1 => "Понедельник",
            2 => "Вторник",
            3 => "Среда",
            4 => "Четверг",
            5 => "Пятница",
            6 => "Суббота",
            7 => "Воскресенье",
            _ => "Неизвестно"
        };
    }
}